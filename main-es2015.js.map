{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.component.html","./src/app/app-routing.module.ts","./src/app/app.component.scss","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/components/call-center/pbx-agent/services/callspoll.service.ts","./src/app/components/call-center/pbx-agent/services/configuration.service.ts","./src/app/components/call-center/pbx-agent/services/ua.service/call-options.ts","./src/app/components/call-center/pbx-agent/services/ua.service/session.ts","./src/app/components/call-center/pbx-agent/services/uac.service.ts","./src/app/services/authentication.service.ts","./src/app/services/global-config.service.ts","./src/app/store/app-config/app-config.module.ts","./src/app/store/app-config/auth/auth.actions.ts","./src/app/store/app-config/auth/auth.effects.ts","./src/app/store/app-config/auth/auth.reducer.ts","./src/app/store/app-config/auth/auth.service.ts","./src/app/store/app-config/auth/auth.state.ts","./src/app/store/app-config/index.ts","./src/app/store/app-config/uac/uac-store.service.ts","./src/app/store/app-config/uac/uac.actions.ts","./src/app/store/app-config/uac/uac.effects.ts","./src/app/store/app-config/uac/uac.reducer.ts","./src/app/store/app-config/uac/uac.state.ts","./src/app/store/app-store.module.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","module.exports = \"<router-outlet></router-outlet>\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nconst routes: Routes = [\r\n  { path: '', loadChildren: () => import('./views/main-view/main-view.module').then(mod => mod.MainViewModule) },\r\n  { path: '**', redirectTo: '' }\r\n];\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes, { useHash: true })],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyJ9 */\"","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  title = 'Portal';\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { AppStoreModule } from './store/app-store.module';\r\nimport { MessageService } from 'primeng/api';\r\n\r\n//\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    AppRoutingModule,\r\n    HttpClientModule,\r\n    AppStoreModule\r\n  ],\r\n  providers: [MessageService],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { Call } from './ua.service/call';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class CallspollService {\r\n\r\n  private _calls: Call[] = [];\r\n  public calls: BehaviorSubject<Call[]>;\r\n\r\n  constructor(\r\n    // private localstorage: LocalStorageService\r\n  ) {\r\n\r\n   // this._loadDeadCalls();\r\n    this.calls = new BehaviorSubject(this._calls);\r\n  }\r\n\r\n  addCall(call: Call, alive = true) {\r\n    if (alive) {\r\n     // call.registerEndCallback(this.saveCall());\r\n    }\r\n    this._calls.unshift(call);\r\n    this._emit();\r\n  }\r\n\r\n  /*\r\n  public saveCall() {\r\n    return (callData) => {\r\n      const id = callData.id;\r\n      const key = `C_${id}`;\r\n\r\n      this.localstorage.setItem(key, callData)\r\n        .subscribe((savedCallData: any) => this._updateCallIndex(savedCallData.id));\r\n    };\r\n  }\r\n*/\r\n  /*\r\n  private _loadDeadCalls() {\r\n    this.localstorage\r\n      .getItem('CALLS_INDEX')\r\n      .map(calls => !calls ? [] : calls)\r\n      .switchMap((callIndex: string[]) => {\r\n        // remove everything but first 15\r\n        callIndex.slice(15).map(id => this.localstorage.removeItem(`C_${id}`));\r\n        const newCallIndex = callIndex.slice(0, 15);\r\n        this.localstorage.setItem('CALLS_INDEX', newCallIndex);\r\n        return Observable.merge(\r\n          ...newCallIndex.map(id => this.localstorage.getItem(`C_${id}`))\r\n        );\r\n      }).subscribe((c) => {\r\n        const call = new Call();\r\n        call.hydrate(c);\r\n        this.addCall(call, false);\r\n      });\r\n  }\r\n*/\r\n\r\n/*\r\n  private _updateCallIndex(id) {\r\n    this.localstorage\r\n      .getItem('CALLS_INDEX')\r\n      .subscribe((callIndex: string[]) => {\r\n        if (callIndex === null) {\r\n          callIndex = [id];\r\n        } else {\r\n          callIndex.push(id);\r\n        }\r\n        this.localstorage.setItem('CALLS_INDEX', callIndex);\r\n      });\r\n\r\n  }\r\n*/\r\n  private _emit() {\r\n    this.calls.next(this._calls);\r\n  }\r\n\r\n  getCallById(id: string) {\r\n    return this._calls.filter(c => c.id === id).shift() || false;\r\n  }\r\n\r\n}","import { Injectable } from '@angular/core';\r\nimport { WebSocketInterface } from 'jssip';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class ConfigurationService {\r\n\r\n    public wsuri: string;\r\n    public sipuri: string;\r\n    public password: string;\r\n    public autoconnect = false;\r\n    public autosave = false;\r\n    private _stuns: string[] = [];\r\n\r\n    private _azurekeys: string[] = [];\r\n\r\n    constructor() {\r\n    }\r\n\r\n    _generateSocket() {\r\n        if (!this.wsuri) {\r\n            throw new Error('host not defined');\r\n        }\r\n        return new WebSocketInterface(this.wsuri);\r\n    }\r\n\r\n    getConfiguration() {\r\n        if (!this._isValid) {\r\n            throw new Error('configuration not loaded');\r\n        }\r\n        return {\r\n            sockets: [this._generateSocket()],\r\n            uri: this.sipuri,\r\n            password: this.password,\r\n            autoConnect: false,\r\n            register: true,\r\n            register_expires: 600,\r\n            session_timers: true,\r\n            connection_recovery_min_interval: 2,\r\n            connection_recovery_max_interval: 30,\r\n            registrar_server: '',\r\n            no_answer_timeout: 60,\r\n            use_preloaded_route: false,\r\n            hack_via_tcp: false,\r\n            hack_via_ws: false,\r\n            hack_ip_in_contact: false\r\n        };\r\n    }\r\n\r\n    get stuns() {\r\n        return this._stuns.join('\\n');\r\n    }\r\n\r\n    set stuns(stuns) {\r\n        this._stuns = stuns.split('\\n').filter(s => s !== '');\r\n    }\r\n\r\n    get azurekeys() {\r\n        return this._azurekeys.join('\\n');\r\n    }\r\n\r\n    set azurekeys(keys) {\r\n        // Will return a shuffled array with the keys (use 1 each time)\r\n        this._azurekeys = keys.split('\\n')\r\n            .filter(s => s !== '');\r\n    }\r\n\r\n    getRandomAzureKey() {\r\n        return this._azurekeys.sort(() => Math.random() - 0.5)[0];\r\n    }\r\n\r\n    getPcConfig() {\r\n        return { 'iceServers': [{ 'urls': this._stuns }], 'gatheringTimeout': 2000, 'rtcpMuxPolicy': 'negotiate' };\r\n    }\r\n\r\n    private _isValid() {\r\n        return this.wsuri != null && this.sipuri != null && this.password != null;\r\n    }\r\n\r\n\r\n\r\n\r\n}","import { Session } from './session';\r\n\r\nimport { CallType, CallDirection, CallIntalkSubtype } from '../models';\r\nimport { ConfigurationService } from './../configuration.service';\r\nimport { IUacNewRTCSessionData } from '../models';\r\n\r\ndeclare type EndcallCallback = (callData: any) => void;\r\n\r\n\r\n/**\r\n * TODO: refactor name.\r\n * SoundEngine would be better...\r\n */\r\nexport class CallOptions {\r\n\r\n    hasAudio = true;\r\n    hasVideo = false;\r\n\r\n    audioCtx: any;\r\n    target: any;\r\n    output: any;\r\n\r\n    public analyser: AnalyserNode;\r\n    micEnabled = true;\r\n    micStream: any;\r\n\r\n    speakerEnabled = true;\r\n    outputAudio: HTMLAudioElement;\r\n\r\n    constructor(private config: ConfigurationService) {\r\n        this.audioCtx = new AudioContext() as any;\r\n    }\r\n\r\n    async get() {\r\n\r\n        return {\r\n            'mediaStream': await this.generateStream(),\r\n            'mediaConstraints': { 'audio': this.hasAudio, 'video': this.hasVideo },\r\n            'pcConfig': this.config.getPcConfig(),\r\n            rtcOfferConstraints: {\r\n                offerToReceiveAudio: this.hasAudio ? 1 : 0,\r\n                offerToReceiveVideo: this.hasVideo ? 1 : 0\r\n            }\r\n        };\r\n\r\n    }\r\n\r\n    getTargetStream(): MediaStream {\r\n        return this.target;\r\n    }\r\n\r\n    public sendAudioBinary(binary: any) {\r\n\r\n        const len = binary.length;\r\n        const bytes = new Uint8Array(len);\r\n        for (let i = 0; i < len; i++) {\r\n            bytes[i] = binary.charCodeAt(i);\r\n        }\r\n\r\n        this.audioCtx.decodeAudioData(bytes.buffer).then(buffer => {\r\n\r\n            const source = this.audioCtx.createBufferSource();\r\n            source.buffer = buffer;\r\n\r\n            const gainNode = this.audioCtx.createGain();\r\n            gainNode.gain.value = 2;\r\n            source.connect(gainNode);\r\n            gainNode.connect(this.target);\r\n            source.start(0);\r\n\r\n        }).catch(e => console.log('ERROR decoding audio!', e));\r\n\r\n    }\r\n\r\n    public sendAudioBlob(blob: Blob) {\r\n\r\n        const audio0 = new Audio(window.URL.createObjectURL(blob));\r\n\r\n        const source = this.audioCtx.createMediaElementSource(audio0);\r\n        source.connect(this.target);\r\n        audio0.loop = false;\r\n\r\n        audio0.onended = () => {\r\n            source.disconnect(this.target);\r\n        };\r\n        audio0.play();\r\n\r\n    }\r\n\r\n    public toggleMic() {\r\n        if (this.micEnabled) {\r\n            this.micEnabled = false;\r\n            this.micStream.disconnect(this.target);\r\n        } else {\r\n            this.micEnabled = true;\r\n            this.micStream.connect(this.target);\r\n        }\r\n    }\r\n\r\n    public toggleSpeaker() {\r\n        if (this.speakerEnabled) {\r\n            this.speakerEnabled = false;\r\n            this.outputAudio.volume = 0;\r\n        } else {\r\n            this.speakerEnabled = true;\r\n            this.outputAudio.volume = 1;\r\n        }\r\n    }\r\n\r\n    public outputStream(stream) {\r\n\r\n        this.output = stream;\r\n        // typescript doen't know 'createMediaStreamDestination' :(\r\n        this.analyser = <any>this.audioCtx.createAnalyser();\r\n\r\n        const target = this.audioCtx.createMediaStreamDestination();\r\n\r\n        const source = this.audioCtx.createMediaStreamSource(stream);\r\n        source.connect(this.analyser);\r\n        this.analyser.connect(target);\r\n\r\n        this.outputAudio = new Audio();\r\n        this.outputAudio.autoplay = true;\r\n        this.outputAudio.srcObject = stream;\r\n    }\r\n\r\n    private async generateStream() {\r\n\r\n        const mic = await navigator.mediaDevices.getUserMedia({ audio: this.hasAudio, video: this.hasVideo });\r\n\r\n        // typescript doen't know 'createMediaStreamDestination' :(\r\n\r\n        this.target = this.audioCtx.createMediaStreamDestination();\r\n\r\n        this.micStream = this.audioCtx.createMediaStreamSource(mic);\r\n        this.micStream.connect(this.target);\r\n        this.micEnabled = true;\r\n        return this.target['stream'];\r\n    }\r\n\r\n\r\n    public close() {\r\n        this.audioCtx.close();\r\n    }\r\n\r\n\r\n\r\n}","import { session as JSSipSession, Utils as JSSIPUtils, stream as JSSIPStream } from 'jssip';\r\n\r\nimport { CallType, CallDirection, CallIntalkSubtype, DTMFSignal } from '../models';\r\n\r\n\r\n\r\n\r\nimport { CallOptions } from './call-options';\r\nimport { BehaviorSubject, Subject } from 'rxjs';\r\n\r\n/**\r\n * Angular wrapper for JSSip.session\r\n */\r\nexport class Session {\r\n\r\n    private _session: JSSipSession;\r\n\r\n    public callOptions: CallOptions;\r\n\r\n    private answerOptions;\r\n\r\n    public status = new BehaviorSubject<CallType>('ringing');\r\n\r\n    public inTalkStatus = new Subject<CallIntalkSubtype>();\r\n    public muted = new Subject<boolean>();\r\n    public dtmf = new Subject<DTMFSignal>();\r\n\r\n    public incomingStream = new BehaviorSubject<any>(null);\r\n\r\n\r\n    private _localStream: JSSIPStream;\r\n\r\n    constructor(sessionRaw: JSSipSession, callOptions: CallOptions) {\r\n        this._session = sessionRaw;\r\n        this.callOptions = callOptions;\r\n        this.inTalkStatus.next(null);\r\n\r\n        this._wireUpEvents();\r\n    }\r\n\r\n\r\n    async resolveCallOptions() {\r\n        if (this.direction === 'IN') {\r\n            this.answerOptions = await this.callOptions.get();\r\n        }\r\n    }\r\n\r\n    get direction(): CallDirection {\r\n        return this._session._direction === 'incoming' ? 'IN' : 'OUT';\r\n    }\r\n\r\n    get id() {\r\n        return this._session.id;\r\n    }\r\n\r\n    get target() {\r\n        return this._session.remote_identity.uri.user;\r\n    }\r\n\r\n    get usernameTarget() {\r\n        return this._session.remote_identity.display_name || '';\r\n    }\r\n\r\n    private _wireUpEvents() {\r\n        this._session\r\n            .on('connecting', (e) => this.onConnecting())\r\n            .on('peerconnection', (e) => this.onPeerConection())\r\n            .on('progress', (e) => this.onProgress())\r\n            .on('accepted', (e) => this.onAccepted(e))\r\n            .on('failed', (e) => this.onFailed(e))\r\n            .on('newDTMF', (e) => this.onDTMF(e))\r\n            .on('hold', (e) => this.onHold())\r\n            .on('unhold', (e) => this.onUnhold())\r\n            .on('ended', (e) => this.onEnded())\r\n            .on('update', (e) => this.onUpdate());\r\n\r\n        if (this._session.connection) {\r\n            this.onPeerConection();\r\n        }\r\n    }\r\n\r\n    onConnecting() {\r\n\r\n        if (this._session.connection.getSenders().length > 0) {\r\n            this._localStream = this._session.connection.getSenders()[0];\r\n        }\r\n    }\r\n    onPeerConection() {\r\n        this._session.connection.addEventListener('addstream', (e) => this.onStreamAdded(e));\r\n    }\r\n\r\n\r\n    onProgress() {\r\n        this.status.next('ringing');\r\n    }\r\n\r\n    onAccepted(e: any) {\r\n        console.log('acepted');\r\n        this.status.next('active');\r\n        this.inTalkStatus.next('talking');\r\n\r\n        if (this._session.connection.getSenders().length > 0) {\r\n            this._localStream = this._session.connection.getSenders()[0];\r\n        }\r\n\r\n        if (e.originator === 'remote') {\r\n            if (e.response.getHeader('X-Can-Renegotiate') === 'false') {\r\n                this._session.data.remoteCanRenegotiateRTC = false;\r\n            } else {\r\n                this._session.data.remoteCanRenegotiateRTC = true;\r\n            }\r\n        }\r\n\r\n        // this.date = this.moment(this._session.start_time).format('DD/MM/YYYY HH:mm:ss');\r\n\r\n    }\r\n\r\n    onStreamAdded(e) {\r\n        this.callOptions.outputStream(e.stream);\r\n    }\r\n\r\n    onDTMF(e) {\r\n        this.dtmf.next({\r\n            originator: e.originator,\r\n            code: `${e.dtmf.tone}`,\r\n        });\r\n    }\r\n\r\n    onHold() {\r\n        this.inTalkStatus.next('hold');\r\n\r\n    }\r\n\r\n    onUnhold() {\r\n        this.inTalkStatus.next('talking');\r\n    }\r\n\r\n    onFailed(e) {\r\n        this.status.next('done');\r\n        console.log('failed!! wtf????', e);\r\n    }\r\n\r\n    onEnded() {\r\n        console.log('eneded???');\r\n        this.muted.complete();\r\n        this.status.next('done');\r\n        this.callOptions.close();\r\n        /*var startTime = this.moment(this.session.start_time);\r\n        var endTime = this.moment(this.session.end_time);\r\n        var duration = this.moment.duration(endTime.diff(startTime));\r\n        this.duration = this.moment.utc(duration.asMilliseconds()).format(\"mm:ss\");*/\r\n\r\n\r\n        JSSIPUtils.closeMediaStream(this._localStream);\r\n    }\r\n\r\n    onUpdate() {\r\n        console.log('on updated');\r\n        this.status.next('done');\r\n    }\r\n\r\n    hangup() {\r\n        this._session.terminate();\r\n    }\r\n\r\n    answer() {\r\n        this._session.answer(this.answerOptions);\r\n    }\r\n\r\n    hold() {\r\n        this._session.hold();\r\n    }\r\n\r\n    unhold() {\r\n        this._session.unhold();\r\n    }\r\n\r\n    mute() {\r\n        this.muted.next(true);\r\n        this._session.mute();\r\n    }\r\n\r\n    unmute() {\r\n        this.muted.next(false);\r\n        this._session.unmute();\r\n    }\r\n\r\n    sendDTMF(d: string) {\r\n        this._session.sendDTMF(d);\r\n    }\r\n\r\n}\r\n","\r\nimport { Injectable, NgZone } from '@angular/core';\r\nimport { Subject, BehaviorSubject } from 'rxjs';\r\nimport {\r\n  IUacMessage, IUacStatus, UacEvent, UacMessageData,\r\n  IUacConnectingData, IUacConnectedData, IUacDisconnectedData,\r\n  IUacRegisteredData, IUacUnregisteredData, IUacRegistrationFailedData,\r\n  IUacRegistrationExpiringData, IUacNewRTCSessionData, IUacNewMessageData\r\n} from './models';\r\nimport { UA } from 'jssip';\r\nimport { ConfigurationService } from './configuration.service';\r\nimport { CallOptions } from './ua.service/call-options';\r\nimport { Session } from './ua.service/session';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class UacService {\r\n\r\n  public notifier: Subject<IUacMessage>;\r\n  public status: BehaviorSubject<IUacStatus>;\r\n  public ua: UA;\r\n  private cacheOptions = [];\r\n\r\n  constructor(\r\n    private config: ConfigurationService,\r\n    private ngZone: NgZone\r\n  ) {\r\n    this.notifier = new Subject<IUacMessage>();\r\n    this.status = new BehaviorSubject<IUacStatus>(this._generateStatus('disconnected'));\r\n  }\r\n\r\n  connect() {\r\n    this.ua = new UA(this.config.getConfiguration());\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this.ua.start();\r\n    });\r\n    this.status.next({ connected: false, status: 'connecting' } as IUacStatus);\r\n    this._wireStatusSubject();\r\n    this._wireMessageSubject();\r\n  }\r\n\r\n  disconnect() {\r\n    this.ua.unregister({ all: true });\r\n    this.ua.stop();\r\n  }\r\n\r\n  private _wireStatusSubject(): void {\r\n    [\r\n      'connected',\r\n      'disconnected',\r\n      'registered',\r\n      'unregistered'\r\n    ].map(event => {\r\n      this.ua.on(event, e =>\r\n        // console.log(event)\r\n        this.ngZone.run(() => this.status.next(this._generateStatus(event as UacEvent)))\r\n      );\r\n    });\r\n  }\r\n\r\n  private _wireMessageSubject(): void {\r\n\r\n    [\r\n      'connected',\r\n      'connecting',\r\n      'disconnected',\r\n      'registered',\r\n      'unregistered',\r\n      'registrationFailed',\r\n      'registrationExpiring',\r\n      'newRTCSession',\r\n      'newMessage'\r\n    ].map(event => {\r\n      this.ua.on(event, e =>\r\n        this.ngZone.run(() =>\r\n          this.notifier.next(this._parseEvent(event as UacEvent, e))\r\n        )\r\n      );\r\n    });\r\n  }\r\n\r\n  private _generateStatus(status: UacEvent): IUacStatus {\r\n    return {\r\n      connected: (status === 'connected' || status === 'registered'),\r\n      status\r\n    };\r\n  }\r\n\r\n  private _parseEvent(name: UacEvent, event: any): IUacMessage {\r\n    let payload: UacMessageData;\r\n\r\n    switch (name) {\r\n      case 'connecting': {\r\n        payload = this._hydratePayload<IUacConnectingData>(event, ['socket', 'attemps']);\r\n        break;\r\n      }\r\n      case 'connected': {\r\n        payload = this._hydratePayload<IUacConnectedData>(event, ['socket']);\r\n        break;\r\n      }\r\n      case 'disconnected': {\r\n        payload = this._hydratePayload<IUacDisconnectedData>(event, ['socket', 'error', 'code', 'reason']);\r\n        break;\r\n      }\r\n      case 'registered': {\r\n        payload = this._hydratePayload<IUacRegisteredData>(event, ['response']);\r\n        break;\r\n      }\r\n      case 'unregistered': {\r\n        payload = this._hydratePayload<IUacUnregisteredData>(event, ['response', 'cause']);\r\n        break;\r\n      }\r\n      case 'registrationFailed': {\r\n        payload = this._hydratePayload<IUacRegistrationFailedData>(event, ['response', 'cause']);\r\n        break;\r\n      }\r\n      case 'registrationExpiring': {\r\n        payload = this._hydratePayload<IUacRegistrationExpiringData>(event, ['msg']);\r\n        break;\r\n      }\r\n      case 'newRTCSession': {\r\n        payload = this._hydratePayload<IUacNewRTCSessionData>(event, ['originator', 'request']);\r\n        let callOptions;\r\n        if (payload.originator === 'local') {\r\n          callOptions = this.cacheOptions.shift();\r\n        } else {\r\n          callOptions = new CallOptions(this.config);\r\n        }\r\n\r\n        payload.session = new Session(event.session, callOptions);\r\n        payload.session.resolveCallOptions();\r\n\r\n        break;\r\n      }\r\n      case 'newMessage': {\r\n        payload = this._hydratePayload<IUacNewMessageData>(event, ['originator', 'session', 'request']);\r\n        break;\r\n      }\r\n      default: {\r\n        throw new Error('unsuported event');\r\n      }\r\n    }\r\n\r\n    return {\r\n      event: name,\r\n      data: payload\r\n    } as IUacMessage;\r\n\r\n  }\r\n\r\n  private _hydratePayload<T>(event, fields): T {\r\n    return fields.reduce((ret, field) => {\r\n      if (!event) {\r\n        return ret;\r\n      }\r\n      ret[field] = event[field] || null;\r\n      return ret;\r\n    }, {}) as T;\r\n  }\r\n\r\n\r\n}\r\n\r\n","import { Inject, Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { environment } from '../../environments/environment';\r\nimport { map } from 'rxjs/operators';\r\nimport { MenuItem } from 'primeng/api';\r\nimport { GlobalConfigService } from './global-config.service';\r\nimport { ILoginData } from '../models';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthenticationService {\r\n  constructor(\r\n    private http: HttpClient,\r\n    private globalConfigService: GlobalConfigService\r\n  ) {\r\n  }\r\n  login1(username: string, password: string) {\r\n    if ((username === 'vasya' || username === 'qq') && password === '1') {\r\n      localStorage.setItem('currentUser', username);\r\n    }\r\n    return username;\r\n  }\r\n  login(username: string, password: string) {\r\n    return this.http.post<ILoginData>(environment.backEndAPI + '/login', {\r\n      login: username,\r\n      password: password\r\n    }).pipe(\r\n      map(n => {\r\n        this.globalConfigService.setMenuItems(n.acl);\r\n        this.globalConfigService.setLoginData(n);\r\n        return n;\r\n      })\r\n    );\r\n  }\r\n  logout() {\r\n    localStorage.removeItem('currentUser');\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { MenuItem } from 'primeng/api';\r\nimport { environment } from '../../environments/environment';\r\nimport { IAcl, ILoginData } from '../models/login-data.model';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GlobalConfigService {\r\n  private menuItems$ = new BehaviorSubject<MenuItem[]>([]);\r\n  private loginData$ = new BehaviorSubject<ILoginData>({\r\n    sid: '',\r\n    auth: false,\r\n    name: 'test',\r\n    acl: [],\r\n    access_token: '',\r\n    user_id: null,\r\n  });\r\n  constructor() {\r\n  }\r\n  setLoginData(loginData) {\r\n    this.loginData$.next(loginData);\r\n  }\r\n  getLoginData() {\r\n    if (this.loginData$.getValue() === null) {\r\n    }\r\n    return this.loginData$.asObservable();\r\n  }\r\n  setMenuItems(acl) {\r\n    this.menuItems$.next(this.aclToMenu(acl));\r\n  }\r\n  getMenuItems() {\r\n    if (this.menuItems$.getValue().length === 0) {\r\n    }\r\n    return this.menuItems$;\r\n  }\r\n  private aclToMenu(acl: IAcl[]): MenuItem[] {\r\n    const res: MenuItem[] = [];\r\n    acl.forEach(\r\n      (item) => {\r\n        let it = this.getMenuItem(res, item.id);\r\n        Object.assign(it, {\r\n          label: item.name\r\n        });\r\n      }\r\n    );\r\n    return res;\r\n  }\r\n  private getMenuItem(menuItems: any[], id: string): MenuItem {\r\n    const itemPaths = id.split('.');\r\n    let itemsArrRef = menuItems;\r\n    let res: MenuItem = {};\r\n    itemPaths.forEach((path, i, paths) => {\r\n      let itemRef;\r\n      for (const mItem of itemsArrRef) {\r\n        if (mItem.id === path) {\r\n          itemRef = mItem;\r\n          itemsArrRef = mItem.items;\r\n          break;\r\n        }\r\n      }\r\n      if (!itemRef) {\r\n        itemRef = {\r\n          id: path,\r\n          items: [],\r\n          icon: environment.menuItemsIcon[path] !== undefined ? environment.menuItemsIcon[path].icon : '',\r\n          routerLink: ['/' + path]\r\n        };\r\n        itemsArrRef.push(itemRef);\r\n        itemsArrRef = itemRef.items;\r\n      }\r\n      res = itemRef;\r\n    }\r\n    );\r\n    return res;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { StoreModule } from '@ngrx/store';\r\nimport * as fromAppConfig from './';\r\nimport { EffectsModule } from '@ngrx/effects';\r\nimport { appEffects } from './';\r\nimport { UacService } from 'src/app/components/call-center/pbx-agent/services/uac.service';\r\nimport { ConfigurationService } from 'src/app/components/call-center/pbx-agent/services/configuration.service';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    EffectsModule.forRoot(appEffects),\r\n    StoreModule.forRoot(\r\n      fromAppConfig.reducers,\r\n      { metaReducers: fromAppConfig.metaReducers }\r\n    )\r\n  ],\r\n  declarations: [],\r\n  providers: [fromAppConfig.appConfigServices]\r\n})\r\nexport class AppConfigModule { }\r\n","import { Action } from '@ngrx/store';\r\nimport {ILoginData, ILoginRequest} from '../../../models/';\r\n\r\nexport enum AuthActionTypes {\r\n  LOGIN = '[Auth] Login request',\r\n  LOGIN_SUCCESS = '[Auth] Login success',\r\n  LOGIN_FAILURE = '[Auth] Login Failure',\r\n}\r\n\r\nexport class LogIn implements Action {\r\n  readonly type = AuthActionTypes.LOGIN;\r\n  constructor(public payload: ILoginRequest) {}\r\n}\r\n\r\nexport class LogInSuccess implements Action {\r\n  readonly type = AuthActionTypes.LOGIN_SUCCESS;\r\n  constructor(public payload: ILoginData) {}\r\n}\r\n\r\nexport class LogInFailure implements Action {\r\n  readonly type = AuthActionTypes.LOGIN_FAILURE;\r\n  constructor(public payload: any) {}\r\n}\r\n\r\n\r\n\r\n\r\nexport type AuthActions =\r\n  LogIn |\r\n  LogInSuccess |\r\n  LogInFailure;\r\n","import { Injectable } from '@angular/core';\r\nimport { Actions, Effect, ofType } from '@ngrx/effects';\r\nimport { AuthActionTypes, LogIn, LogInFailure, LogInSuccess } from './auth.actions';\r\nimport { catchError, map, switchMap, tap } from 'rxjs/operators';\r\nimport { AuthenticationService } from '../../../services/authentication.service';\r\nimport { of } from 'rxjs';\r\nimport { ILoginData, ILoginRequest } from '../../../models';\r\nimport { MessageService } from 'primeng/api';\r\n\r\n\r\n@Injectable()\r\nexport class AuthEffects {\r\n\r\n  @Effect()\r\n  logIn$ = this.actions$.pipe(\r\n    ofType(AuthActionTypes.LOGIN),\r\n\r\n    map((action: LogIn) => action.payload),\r\n    switchMap((payload: ILoginRequest) =>\r\n      this.authHttpService\r\n        .login(payload.login, payload.password)\r\n        .pipe(\r\n          map((userData: ILoginData) => new LogInSuccess(userData)),\r\n          catchError(error => of(new LogInFailure(error)))\r\n        )\r\n    ),\r\n  );\r\n\r\n  @Effect({ dispatch: false })\r\n  logInSuccess$ = this.actions$\r\n    .pipe(\r\n      ofType(AuthActionTypes.LOGIN_SUCCESS),\r\n      tap(userData =>\r\n        this.messageService\r\n          .add({ severity: 'success', summary: 'Service Message', detail: ' ' }))\r\n    );\r\n\r\n  @Effect({ dispatch: false })\r\n  logInFailure$ = this.actions$\r\n    .pipe(\r\n      ofType(AuthActionTypes.LOGIN_FAILURE),\r\n      tap(error => console.log(error)),\r\n      tap((error: any) =>\r\n        this.messageService\r\n          .add({ severity: 'error', summary: 'Service Message', detail: error.payload.statusText }))\r\n    );\r\n\r\n\r\n  constructor(\r\n    private actions$: Actions,\r\n    private authHttpService: AuthenticationService,\r\n    private messageService: MessageService\r\n  ) {\r\n  }\r\n}\r\n","import { AuthActions, AuthActionTypes } from './auth.actions';\r\nimport { initialState, IAuthState } from './auth.state';\r\n\r\nexport function reducer(state = initialState, action: AuthActions): IAuthState {\r\n  switch (action.type) {\r\n    case AuthActionTypes.LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        userData: action.payload,\r\n        isAuthenticated: action.payload.auth\r\n      };\r\n    case AuthActionTypes.LOGIN_FAILURE:\r\n      return {\r\n        ...state,\r\n        errorText: action.payload.statusText\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport { IAuthState } from './auth.state';\r\n\r\nexport const getIsAuth = (state: IAuthState) => state.isAuthenticated;\r\n","import { Injectable } from '@angular/core';\r\nimport { createFeatureSelector, createSelector, Store } from '@ngrx/store';\r\nimport { distinctUntilChanged, tap } from 'rxjs/operators';\r\nimport { IAppState } from '../index';\r\nimport { getIsAuth } from './auth.reducer';\r\nimport { LogIn } from './auth.actions';\r\n\r\n/*const getAppState = createFeatureSelector<IAppState>('appConfig');\r\nconst getAuthState = createSelector(\r\n  getAppState,\r\n  (state: IAppState) => {\r\n    console.log(state.auth);\r\n    return state.auth;\r\n  }\r\n);*/\r\nconst getAuthState = (state: IAppState) => state.auth;\r\n\r\nconst isAuth = createSelector(\r\n  getAuthState,\r\n  getIsAuth\r\n);\r\n@Injectable()\r\nexport class AuthService {\r\n  constructor(private store: Store<IAppState>) {\r\n  }\r\n  get isAuth$() {\r\n    return this.store.select(isAuth).pipe(distinctUntilChanged());\r\n  }\r\n  logIn(p) {\r\n    this.store.dispatch(new LogIn(p));\r\n  }\r\n}\r\n","import { ILoginData } from 'src/app/models';\r\n\r\nexport interface IAuthState {\r\n    isAuthenticated: boolean;\r\n    userData: ILoginData;\r\n    errorText?: string;\r\n}\r\nexport const initialState: IAuthState = {\r\n    isAuthenticated: false,\r\n    userData: null\r\n};\r\n","import {\r\n  ActionReducerMap,\r\n  MetaReducer\r\n} from '@ngrx/store';\r\nimport { environment } from '../../../environments/environment';\r\nimport * as fromAuth from './auth/auth.reducer';\r\n\r\nimport { AuthService } from './auth/auth.service';\r\nimport { AuthEffects } from './auth/auth.effects';\r\n\r\nimport * as fromUac from './uac/uac.reducer';\r\nimport { UacStoreService } from './uac/uac-store.service';\r\nimport { UacEffects } from './uac/uac.effects';\r\n\r\nexport interface IAppState {\r\n  auth: fromAuth.IAuthState;\r\n  uac: fromUac.IUacState;\r\n}\r\nexport const reducers: ActionReducerMap<IAppState> = {\r\n  auth: fromAuth.reducer,\r\n  uac: fromUac.reducer\r\n};\r\nexport const metaReducers: MetaReducer<IAppState>[] = !environment.production ? [] : [];\r\nexport const appConfigServices = [AuthService, UacStoreService];\r\nexport const appEffects = [AuthEffects, UacEffects];\r\n","import { IUacAuthConfig, IUacState } from './uac.state';\r\nimport { createFeatureSelector, createSelector, Store } from '@ngrx/store';\r\nimport { IAppState } from '..';\r\nimport { getIsConnected } from './uac.reducer';\r\nimport { Injectable } from '@angular/core';\r\nimport { distinctUntilChanged } from 'rxjs/operators';\r\nimport { Connect, ConnectSuccess, SetConfig } from './uac.actions';\r\nimport { CallspollService } from 'src/app/components/call-center/pbx-agent/services/callspoll.service';\r\n\r\n\r\n/*const getAppState = createFeatureSelector<IAppState>('appConfig');\r\nconst getUacState = createSelector(\r\n  getAppState,\r\n  (state: IAppState) => state.uac\r\n);*/\r\nconst getUacState = (state: IAppState) => state.uac;\r\nconst isConnected = createSelector(\r\n  getUacState,\r\n  getIsConnected\r\n);\r\nconst config = createSelector(\r\n  getUacState,\r\n  (state: IUacState) => (\r\n    {\r\n      sipuri: state.config.uri,\r\n      wsuri: state.wsuri,\r\n      password: state.config.password\r\n    } as IUacAuthConfig\r\n  )\r\n);\r\n\r\n@Injectable()\r\nexport class UacStoreService {\r\n\r\n  constructor(\r\n    private store: Store<IAppState>,\r\n    private callSpool: CallspollService\r\n    ) {\r\n      //this.callSpool.calls.subscribe(n=>console.log(n))\r\n  }\r\n\r\n  get isConnected$() {\r\n    return this.store.select(isConnected).pipe(distinctUntilChanged());\r\n  }\r\n\r\n  get config$() {\r\n    return this.store.select(config);\r\n  }\r\n\r\n  set config(c: IUacAuthConfig) {\r\n    this.store.dispatch(new SetConfig(c));\r\n  }\r\n\r\n  connect() {\r\n    //this.store.dispatch(new LogIn(p));\r\n    this.store.dispatch(new Connect());\r\n  }\r\n\r\n\r\n}\r\n","\r\nimport { Action } from '@ngrx/store';\r\nimport { IUacAuthConfig } from './uac.state';\r\nimport { CallType } from 'src/app/components/call-center/pbx-agent/services/models';\r\n\r\nexport enum UacActionTypes {\r\n    CONNECT = '[UAC] Connect request',\r\n    CONNECT_START = '[UAC] Connect start',\r\n    CONNECT_SUCCESS = '[UAC] Connect success',\r\n    CONNECT_FAILURE = '[UAC] Connect Failure',\r\n    SET_CONFIG = '[UAC] Set config',\r\n    CALL = '[UAC] Call originate',\r\n}\r\n\r\nexport class Connect implements Action {\r\n    readonly type = UacActionTypes.CONNECT;\r\n    //constructor(public payload: IUacAuthRequest) { }\r\n}\r\n\r\nexport class ConnectStart implements Action {\r\n    readonly type = UacActionTypes.CONNECT_START;\r\n    //constructor(public payload: IUacAuthRequest) { }\r\n}\r\n\r\nexport class ConnectSuccess implements Action {\r\n    readonly type = UacActionTypes.CONNECT_SUCCESS;\r\n    constructor(public payload: boolean) { }\r\n}\r\n\r\nexport class ConnectFailure implements Action {\r\n    readonly type = UacActionTypes.CONNECT_FAILURE;\r\n    constructor(public payload: any) { }\r\n}\r\n\r\nexport class SetConfig implements Action {\r\n    readonly type = UacActionTypes.SET_CONFIG;\r\n    constructor(public payload: IUacAuthConfig) { }\r\n}\r\n\r\nexport class Call implements Action {\r\n    readonly type = UacActionTypes.CALL;\r\n    constructor(public payload: CallType) { }\r\n}\r\n\r\n\r\n\r\nexport type UacActions =\r\n    Connect |\r\n    ConnectStart |\r\n    ConnectSuccess |\r\n    ConnectFailure |\r\n    SetConfig |\r\n    Call;\r\n","import { CallspollService } from 'src/app/components/call-center/pbx-agent/services/callspoll.service';\r\nimport { UacStoreService } from './uac-store.service';\r\nimport { UacService } from './../../../components/call-center/pbx-agent/services/uac.service';\r\nimport { Injectable } from '@angular/core';\r\nimport { Effect, ofType, Actions } from '@ngrx/effects';\r\nimport { map, switchMap, tap, catchError, skip, takeWhile, takeLast, withLatestFrom, skipWhile, mergeMap, filter, first } from 'rxjs/operators';\r\nimport { UacActionTypes, ConnectFailure, ConnectSuccess, ConnectStart, Call } from './uac.actions';\r\nimport { of } from 'rxjs/internal/observable/of';\r\nimport { ConfigurationService } from 'src/app/components/call-center/pbx-agent/services/configuration.service';\r\nimport { Observable } from 'rxjs';\r\nimport { defer } from 'q';\r\n\r\n\r\n@Injectable()\r\nexport class UacEffects {\r\n\r\n    @Effect()\r\n    init$ = this.uacService.status.pipe(\r\n        skip(1),\r\n    ).pipe(\r\n        takeWhile((v, i) => i + 1 <= 3 && !v.connected, true),\r\n        takeLast(1),\r\n        map((v, i) => {\r\n            if (v.connected) {\r\n                return new ConnectSuccess(v.connected);\r\n            } else {\r\n                this.uacService.disconnect();\r\n                return new ConnectFailure('Connect failure');\r\n            }\r\n        }),\r\n    );\r\n\r\n    @Effect({ dispatch: false })\r\n    init1$ = this.uacService.notifier.pipe(\r\n        map((v) => {\r\n            //      console.log(v);\r\n        })\r\n    );\r\n\r\n    @Effect()\r\n    callsPool$ = this.callspollService.calls.pipe(\r\n        skipWhile(n => !n.length),\r\n        //tap(n => console.log(n)),\r\n        //tap(n => console.log(n)),\r\n        switchMap(calls => calls[0].status.pipe(\r\n            map(n => new Call(n.type))\r\n        ))\r\n    );\r\n\r\n\r\n\r\n\r\n    @Effect()\r\n    connect$ = this.actions$.pipe(\r\n        ofType(UacActionTypes.CONNECT),\r\n        withLatestFrom(this.uacStoreService.config$),\r\n        tap(([action, configAuth]) => {\r\n            //console.log(storeState);\r\n            const us = this.uacService;\r\n            const config = this.config;\r\n            Object.assign(config, { ...configAuth });\r\n            us.connect();\r\n            // return new ConnectSuccess(true);\r\n        }),\r\n        map(() => new ConnectStart()),\r\n        /*switchMap(\r\n            () =>\r\n                this.uacService.status.pipe(\r\n                    skip(1)\r\n                ).pipe(\r\n                    takeWhile((v, i) => i + 1 <= 3 && !v.connected, true),\r\n                    takeLast(1),\r\n                    map((v, i) => {\r\n                        //console.log(v.status + ' - ' + i + ' - ' + v.connected);\r\n                        //this.uacService.disconnect();\r\n                        //return v;\r\n                        if (v.connected) {\r\n                            return new ConnectSuccess(v.connected);\r\n                        } else {\r\n                            this.uacService.disconnect();\r\n                            return new ConnectFailure('Connect failure');\r\n                        }\r\n                    }),\r\n                )\r\n        ),*/\r\n        catchError(error => {\r\n            return of(new ConnectFailure(error.message || 'error'));\r\n        })\r\n    );\r\n\r\n    constructor(\r\n        private actions$: Actions,\r\n        private uacService: UacService,\r\n        private config: ConfigurationService,\r\n        private uacStoreService: UacStoreService,\r\n        private callspollService: CallspollService\r\n    ) {\r\n    }\r\n}\r\n","import { initialState, IUacState } from './uac.state';\r\nimport { UacActions, UacActionTypes } from './uac.actions';\r\nimport { config } from 'rxjs';\r\n\r\nexport function reducer(state = initialState, action: UacActions): IUacState {\r\n    switch (action.type) {\r\n        case UacActionTypes.CONNECT_START:\r\n            return {\r\n                ...state,\r\n                connecting: true\r\n            };\r\n        case UacActionTypes.CONNECT_SUCCESS:\r\n            return {\r\n                ...state,\r\n                connecting: false,\r\n                connected: action.payload\r\n            };\r\n        case UacActionTypes.CONNECT_FAILURE:\r\n            return {\r\n                ...state,\r\n                connecting: false,\r\n                connected: false,\r\n                errorText: action.payload\r\n            };\r\n        case UacActionTypes.SET_CONFIG:\r\n            return {\r\n                ...state,\r\n                config: {\r\n                    ...state.config,\r\n                    uri: action.payload.sipuri, password: action.payload.password\r\n                },\r\n                wsuri: action.payload.wsuri\r\n            };\r\n        case UacActionTypes.CALL:\r\n            return {\r\n                ...state,\r\n                callState: action.payload\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport { IUacState } from './uac.state';\r\n\r\nexport const getIsConnected = (state: IUacState) => state.connected;\r\n","import { CallType } from './../../../components/call-center/pbx-agent/services/models';\r\n// export enum EDialState\r\n\r\nexport type DialStatus = 'ANSWER' | 'BUSY';\r\nexport interface IUacConfig {\r\n    sockets: any[];\r\n    uri: string;\r\n    password: string;\r\n    autoConnect: boolean;\r\n    register: boolean;\r\n    register_expires: number;\r\n    session_timers: boolean;\r\n    connection_recovery_min_interval: number;\r\n    connection_recovery_max_interval: number;\r\n    registrar_server: string;\r\n    no_answer_timeout: number;\r\n    use_preloaded_route: boolean;\r\n    hack_via_tcp: boolean;\r\n    hack_via_ws: boolean;\r\n    hack_ip_in_contact: boolean;\r\n}\r\n\r\nexport const configInitialState: IUacConfig = {\r\n    sockets: null,\r\n    uri: '',\r\n    password: '',\r\n    autoConnect: false,\r\n    register: true,\r\n    register_expires: 600,\r\n    session_timers: true,\r\n    connection_recovery_min_interval: 2,\r\n    connection_recovery_max_interval: 30,\r\n    registrar_server: '',\r\n    no_answer_timeout: 60,\r\n    use_preloaded_route: false,\r\n    hack_via_tcp: false,\r\n    hack_via_ws: false,\r\n    hack_ip_in_contact: false\r\n}\r\n\r\n\r\nexport interface IUacAuthConfig {\r\n    sipuri: string;\r\n    wsuri: string;\r\n    password: string;\r\n}\r\n\r\nexport interface IUacState {\r\n    connected: boolean;\r\n    connecting: boolean;\r\n    callInProgress: boolean;\r\n    callState: CallType,\r\n    dialStatus: DialStatus;\r\n    config: IUacConfig;\r\n    wsuri: string;\r\n    errorText?: string;\r\n}\r\n\r\nexport const initialState: IUacState = {\r\n    connected: false,\r\n    connecting: false,\r\n    callInProgress: false,\r\n    callState: null,\r\n    dialStatus: null,\r\n    config: configInitialState,\r\n    wsuri: '',\r\n    errorText: ''\r\n};\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { AppConfigModule } from './app-config/app-config.module';\r\nimport { StoreDevtoolsModule } from '@ngrx/store-devtools';\r\nimport { environment } from '../../environments/environment';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n\r\n    AppConfigModule,\r\n    environment.production ? [] : StoreDevtoolsModule.instrument()\r\n  ],\r\n  declarations: []\r\n\r\n})\r\nexport class AppStoreModule { }\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false,\r\n  ws: 'ws://localhost:6759',\r\n  backEndAPI: 'http://localhost:3000/api',\r\n  menuItemsIcon: {\r\n    requests: {\r\n      icon: 'pi pi-fw pi-comments'\r\n    },\r\n    statistics: {\r\n      icon: 'pi pi-chart-bar'\r\n    },\r\n    calendar: {\r\n      icon: 'pi pi-calendar-times'\r\n    },\r\n    cashbox: {\r\n      icon: 'cash-ico'\r\n    }\r\n  }\r\n\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"],"sourceRoot":"webpack:///"}